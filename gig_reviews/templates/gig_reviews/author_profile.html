{% extends 'base.html' %}
{% load static %}
{% load cloudinary %}

{% block title %}{{ author.username }}'s Profile{% endblock %}

{% block content %}
<div class="container search-item profile-page py-4">
  <div class="row mx-auto justify-content-center">
    <div class="col-12 text-center">
      <h1>{{ author.username }}'s Public Profile</h1>

      <div class="result-card">
        {% if profile and profile.image.url %}
          <img src="{{ profile.image.url }}" alt="{{ author.username }}'s profile picture"
               class="img-fluid mb-3">
        {% else %}
          <img src="https://res.cloudinary.com/dqde3a83z/image/upload/v1748106876/red-horns_meorvq.png" class="card-img-top horns" alt="Default horns image">
        {% endif %}

        {% if profile.bio %}
          <p>{{ profile.bio }}</p>
        {% endif %}

        <p>Location:
          {% if profile.location %}
            {{ profile.location }}
          {% else %}
            Not specified
          {% endif %}
        </p>

        {% if profile.facebook %}
          <p>Facebook:
            <a href="{{ profile.facebook }}" target="_blank">{{ profile.facebook }}</a>
          </p>
        {% endif %}

        {% if profile.instagram %}
          <p>Instagram:
            <a href="{{ profile.instagram }}" target="_blank">{{ profile.instagram }}</a>
          </p>
        {% endif %}
      </div>

      <div class="mt-5">
        <h2>Reviews:</h2>
        <ul class="list-unstyled">
          {% for review in reviews %}
            <li class="chaos-card tilt">
              <div class="card-body">
                <h5><strong>{{ review.artist.name }}</strong> â€” {{ review.title }}</h5>
                <p>{{ review.gig_date|date:"d/m/Y" }}</p>
                <p>{{ review.review }}</p>
              </div>
            </li>
          {% empty %}
            <li>You haven't written any reviews yet</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
